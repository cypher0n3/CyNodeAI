# Orchestrator bootstrap example (minimal for Phase 1).
# Load at startup via config (e.g. bootstrap.yaml_path).
# Secrets MUST NOT be stored here; use environment variables or a secrets manager.
# Example: set CYNODE_NODE_REGISTRATION_PSK for node registration PSK.

version: 1

# Preference defaults (scope_type=system); optional.
# These are user-facing task-execution preferences and constraints written to preference_entries.
# This is not deployment or service configuration.
preferences:
  - key: output.summary_style
    value: concise
    value_type: string
  - key: language.preferred
    value: en
    value_type: string
  - key: code.language.rank_ordered
    value:
      - language: go
        preferred_for:
          project_kinds:
            - backend
            - cli
            - infra
      - language: python
        preferred_for:
          project_kinds:
            - data
            - tooling
            - scripts
    value_type: array
  - key: code.language.disallowed
    value:
      - php
      - perl
    value_type: array
  - key: standards.markdown.line_length
    value: 100
    value_type: number
  - key: definition_of_done.required_checks
    value:
      - lint
      - unit_tests
      - docs_updated
    value_type: array

# System settings (operational configuration and policy parameters); optional.
# System settings are not user task-execution preferences.
system_settings:
  - key: agents.project_manager.model.selection.execution_mode
    value: auto
    value_type: string
  - key: agents.project_manager.model.selection.mode
    value: auto_sliding_scale
    value_type: string
  - key: agents.project_manager.model.selection.prefer_orchestrator_host
    value: true
    value_type: boolean

  # Optional override:
  # - When set, pins the effective local Project Manager model name.
  # - When unset, the effective local Project Manager model is selected automatically.
  # - `tinyllama` is the smallest supported fallback model for limited systems.
  #
  # - key: agents.project_manager.model.local_default_ollama_model
  #   value: tinyllama
  #   value_type: string

  # Model management defaults (operational settings).
  - key: models.cache.max_bytes
    value: 107374182400
    value_type: number
  - key: models.download.require_user_approval
    value: true
    value_type: boolean

# Access control rules; optional.
# Used to seed access_control_rules for policy enforcement.
access_control_rules: []

# Optional: sandbox image registry defaults (registry URL, policy).
# sandbox_image_registry: {}

# Optional: initial admin user for fresh install (REQ-IDENTY-0113).
# Password MUST come from env or secrets manager; do not put hashes here.
# admin_user:
#   handle: admin
#   password_env: CYNODE_ADMIN_PASSWORD
